{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Drone Tasking Manager","text":"<p>DroneTM is an integrated digital public good solution designed to harness the power of the crowd to generate high-resolution aerial maps of any location.</p> <p>This innovative platform provides drone pilots, particularly in developing countries, with job opportunities while contributing to the creation of high-resolution datasets crucial for disaster response and community resilience.</p>"},{"location":"#problem-statement","title":"Problem Statement","text":"<p>In low-income and disaster-prone areas, the accessibility to near real-time satellite datasets is severely restricted. High-resolution satellite imagery, when available, is often prohibitively expensive and outdated. Full-scale aircraft mapping is not a viable option due to its high costs and operational complexity. Traditional mapping solutions, relying on professional consultants with expensive equipment, often result in delays and lack of locally relevant data. Existing drone operation tools are mostly proprietary and not designed for large-scale collaborative efforts, limiting their effectiveness for community-driven projects.</p>"},{"location":"#solution","title":"Solution","text":"<p>DroneTM offers a solution to these challenges by empowering communities to utilize drones for immediate and locally relevant mapping needs. Our platform:</p> <ul> <li>Provides a user-friendly, inclusive application enabling anyone with a drone, including inexpensive consumer or DIY drones, to contribute to a global repository of free and open aerial imagery.</li> <li>Facilitates community-driven drone operations, ensuring immediate response and responsible mapping that considers local needs.</li> <li>Coordinates aerial survey activities among multiple pilots through an open-source tasking platform, incorporating tools and processes to ensure coordinated flight plans for effective imagery acquisition.</li> <li>Offers a seamless pipeline for processing and dissemination of the collected imagery.</li> </ul>"},{"location":"#vision","title":"Vision","text":"<p>Our vision is to create a platform that is not only accessible and user-friendly but also inclusive, enabling widespread participation in creating high-resolution aerial maps. By leveraging the power of community-operated drones, we aim to build a resilient and responsive solution that addresses the needs of low-income and disaster-prone areas.</p>"},{"location":"#features","title":"Features","text":"<ol> <li>Crowdsourced Mapping: Empower drone pilots to contribute to a global imagery repository.</li> <li>Community-Driven Operations: Enable communities to use drones for immediate and locally relevant mapping.</li> <li>Open-Source Platform: Coordinate aerial surveys with an open-source tasking platform.</li> <li>Seamless Pipeline: Ensure smooth processing and dissemination of imagery data.</li> <li>User-Friendly Application: Designed for ease of use, allowing even non-professional pilots to contribute.</li> </ol>"},{"location":"#supported-drones","title":"Supported Drones","text":"<p>To see a list of supported and unsupported drones, please visit the supported drones table.</p>"},{"location":"CONTRIBUTING/","title":"Contribution Guide","text":""},{"location":"INSTALL/","title":"Installation Guide","text":""},{"location":"timeline/","title":"Timeline","text":"<p>In reverse chronological order, with most recent events first.</p> <p> 2025-04 Freetown, Sierra Leone Project         \ud83d\ude81 In collaboration with the government in Freetown, we undertook a large         80km2 mapping project, alongside local drone operators.          2025-01 Field Testing in Mexico         \ud83d\ude81 Further field testing in Mexico, and formation of potential         mapping partnerships.          2024-07 Field Testing in Bali         \ud83d\ude81 Field tests to nail down the flight plan generation, including         terrain following.          2024-06 Start of Software Development         \ud83d\udc68\ud83c\udffb\u200d\ud83d\udcbb NAXA &amp; HOT start software development, with particular focus         on the flight plan generation and task area division algorithm.          2024-05 Grant Awarded For Development         \ud83d\udcdd World Bank project for HOTOSM &amp; NAXA collaboration.          2024-xx Contract for Manufacture of Drones         \ud83d\udee0\ufe0f Contract agreed for the production of a small, lightweight,         and affordable Community Mapping Drone.          2023-09 Initial Research &amp; Concept         \ud83d\udd2c Concept Note written for a 'Drone Tasking Manager'.          </p>"},{"location":"about/about/","title":"\ud83d\udcd6 History","text":""},{"location":"about/faq/","title":"\u2753 Frequently Asked Questions \u2753","text":""},{"location":"about/faq/#general","title":"General","text":""},{"location":"about/faq/#q-why-should-i-consider-dronetm-over-other-options","title":"Q. Why should I consider DroneTM over other options?","text":"<p>As of 2025 there are 3 basic options for drones:</p> <ol> <li>~$20,000 and up professional fixed-wing mapping platform    like a Sensefly Ebee or Wingtra One.</li> <li>~$4,000-$10,000 enterprise quadcopter Like a DJI Mavic    Enterprise, Autel Evo, or DJI Matrice.</li> <li>~$1,000 micro-quadcopter like a DJI Mini 4 Pro.</li> </ol>"},{"location":"about/faq/#option-1-expensive-route-consultant","title":"Option 1: Expensive Route (Consultant)","text":"<p>If you have an expensive operator and want to go big (thousands of km\u00b2 or more) and don't mind a lot more administrative hassles, permissions, and are willing to climb a learning curve, get a Sensefly Ebee or Wingtra One, which come with dedicated laptop-based planning suites to generate mapping flight missions.</p>"},{"location":"about/faq/#option-2-mid-level-cost-diy-paid-software","title":"Option 2: Mid-Level Cost (DIY Paid Software)","text":"<p>If you have a moderately expensive operator, but still not looking to get into industrial-scale mapping, you get something like a Mavic Enterprise, and use it with a commercial flight planning software like DroneDeploy.</p> <p>This works pretty well (you still might want to use our Drone Tasking Manager to coordinate flight plans if you have more than one, but at least you can generate good mapping flight plans with commercial software).</p>"},{"location":"about/faq/#option-3-low-cost-community-driven-drone-tm","title":"Option 3: Low-Cost Community-Driven (Drone-TM)","text":"<p>We usually recommend the DJI Mini 4 Pro for local communities; it's by a substantial margin the best value for money in terms of image quality per dollar (from currently available drones). The \"Fly More Combo\" retails for USD$1050 and comes with 3 batteries and a controller, so you can fly fairly consistently throughout the day straight after unboxing.</p> <p>It has some major advantages:</p> <ul> <li>It's less than 250 grams, so it's very lightly regulated in many countries;   in many places you don't need an operators licence, and often things like   flight ceilings don't apply to micro-drones.</li> <li>It has a remarkably good camera, creating imagery that rivals much more   expensive drones.</li> <li>It's surprisingly stable in the wind despite its small size.</li> <li>It's really cheap (USD$1050 for the Fly More Combo, ~$750 for the drone with   only 1 battery and basic controller) and widely available.</li> <li>It's easy to get serviced because it's a very popular consumer drone.</li> </ul> <p>However, the Mini 4 Pro has 2 main drawbacks:</p> <ol> <li>It doesn't work with most mapping mission planning software suites (because    DJI has still not released an SDK for it, despite claiming they intended to do so).</li> <li>It's not the fastest flyer, so it can't cover the amount of area that a more    expensive drone can do in a day.</li> </ol> <p>For the former drawback, we specifically developed our Drone Tasking Manager to work well with the Mini 4 Pro because it's such an effective, accessible, and affordable option for communities. As far as we know our DroneTM is the only way to use the Mini 4 Pro for serious professional mapping, but it does work, and it actually works pretty well.</p> <p>But be warned; you'd still be investing in a drone for which only our solution really permits professional mapping. Our solution is open source and free to use: no \"freemium\" licensing whereby you only get a limited functionality.</p> <p>It's a Digital Public Good and we're not trying to make money off it, we're trying to empower communities with it.</p> <p>For the latter drawback, it's really a question of who is flying. If it's a highly-paid person who travels away from home to cover a given area, you want a larger, faster drone to cover more area per day (you can cover 1-4 km\u00b2 per day at 5cm GSD with good enough overlap for decent 3D using a Mini 4 Pro, whereas you can cover &gt;20km\u00b2/day with a Sensefly Ebee or Wingtra One - but those are $20,000 instead of $1050).</p> <p>If it's local community members flying relatively close to home, it can be much more cost effective using a small fleet of cheaper drones like the Mini 4 Pro (plus it helps the local economy and people).</p>"},{"location":"about/faq/#q-what-problem-do-we-solve-with-dronetm","title":"Q. What problem do we solve with DroneTM?","text":"<p>Enhancing Emergency Response We address the need for faster and more precise deployment of drones during emergencies, enabling improved resource allocation and decision-making to ensure quicker and more effective crisis management.</p> <p>Empowering Local Communities We solve the challenge of limited access to real-time aerial data by equipping local communities with insights that enhance disaster preparedness, support local initiatives, and enable informed decision-making.</p> <p>Optimizing Operational Efficiency We tackle inefficiencies in drone operations by streamlining tasking, reducing manual interventions, and minimizing resource wastage, resulting in cost and time savings.</p> <p>Streamlining Access to Drone Data We eliminate barriers to accessing drone data by providing a centralized platform, ensuring critical information is easily available to stakeholders for better decision-making.</p>"},{"location":"about/faq/#q-how-do-i-get-started-with-dronetm","title":"Q. How do I get started with DroneTM?","text":"<p>You can contribute to DroneTM in multiple ways:</p> <ol> <li>If you have a DJI Mini 4 Pro drone, you can choose nearby projects, capture images, and upload them.</li> <li>If you need drone imagery for your locality, you can create a project with the necessary details.</li> <li>If you're a developer, you can fork the project and contribute    to its development. We encourage starting with tickets labeled as \u201cgood first issue.\u201d</li> </ol>"},{"location":"about/faq/#q-what-are-the-outputs-i-get-from-dronetm-are-they-raw-drone-imagery-or-the-processed-data-like-orthophotos-and-surface-models","title":"Q. What are the outputs I get from DroneTM? Are they raw drone imagery or the processed data like orthophotos and surface models?","text":"<p>Currently, only processed data is available for download. The final outputs include:</p> <ul> <li>2D Orthophoto: a birdseye view of your area (like a high resolution satellite image).</li> <li>3D Point Cloud: this can be used to generate Digital Terrain / Surface Models.</li> </ul>"},{"location":"about/faq/#q-do-i-need-an-osm-account-or-need-to-create-a-new-account-to-contribute-to-dronetm","title":"Q. Do I need an OSM account or need to create a new account to contribute to DroneTM?","text":"<p>No, you don\u2019t need an OSM account. You can simply sign up using your Google account. We could add other login providers on request / over time too.</p>"},{"location":"about/faq/#q-what-if-the-project-area-of-my-project-is-large-and-needs-multiple-flight-operations","title":"Q. What if the project area of my project is large and needs multiple flight operations?","text":"<p>DroneTM divides large project areas into multiple tasks, allowing you to adjust the area per task. Note: The maximum project area allowed is 100 sq. km.</p>"},{"location":"about/faq/#q-what-if-my-project-creation-contains-no-fly-zones","title":"Q. What if my project creation contains no-fly zones?","text":"<p>During project creation, you can specify that the project area includes no-fly zones. There is a feature to draw these zones on the project map, and the flight plan will exclude any specified no-fly zones.</p>"},{"location":"about/faq/#q-what-drones-are-supported","title":"Q. What Drones Are Supported?","text":"<p>See here for an up to date list of supported drones.</p> <p>Users can also download the GeoJSON of the task area and load it into their drone flight planning software to upload to their Drone.</p> <p>Note</p> <p>We have a few angles to improve drone support.</p> <p>See   this document   for more information.</p>"},{"location":"about/faq/#q-what-drones-are-not-supported","title":"Q. What Drones Are Not Supported?","text":"<p>We don't have an exhaustive list of all unsupported drones, but in general, if the drone is not listed as supported, then DroneTM will probably not work with it.</p> <p>Our goal is to support affordable community mapping drones that ideally cost less than 1000 USD, so support for expensive commercial drones will not be a priority for now.</p>"},{"location":"about/faq/#info-for-drone-operators","title":"Info For Drone Operators","text":""},{"location":"about/faq/#help-im-having-trouble-managing-my-collected-imagery","title":"Help! I'm having trouble managing my collected imagery","text":"<ul> <li>Sometimes you may have to deal with factors such as limited hard drive,   space, unreliable hardware, and patchy internet.</li> <li>If you are worried about data loss, the best bet is to backup the data   first, then perhaps have a data/project manager deal with the final   upload and processing in DroneTM.</li> <li>There are a few options for uploading data.</li> <li>First of all, your project manager, or a contact at HOTOSM / NAXA should   create an online accessible data bucket.</li> <li> <p>On the technical side, they will need:</p> <ul> <li>An S3 bucket with private permissions <code>some-bucket-name</code>.</li> <li> <p>An IAM user, with policy (note <code>s3:ListAllMyBuckets</code> is required   unfortunately):</p> <pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetBucketLocation\",\n        \"s3:ListBucket\",\n        \"s3:GetObject\",\n        \"s3:PutObject\",\n        \"s3:DeleteObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::some-bucket-name\",\n        \"arn:aws:s3:::some-bucket-name/*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:ListAllMyBuckets\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n</code></pre> </li> </ul> <ul> <li>A pair of security credentials for the IAM user.   Access / Secret key pair.</li> </ul> </li> </ul>"},{"location":"about/faq/#simple-web-ui-option","title":"Simple: Web UI Option","text":"<ol> <li>Access: https://demo.filestash.app</li> <li>Go to the 'S3' tab.</li> <li>Click 'Advanced'.</li> <li> <p>Enter credentials:</p> <ul> <li>Endpoint: https://some-bucket-name.s3.amazonaws.com<ul> <li>Replace <code>some-bucket-name</code> with the name provided by your manager.</li> </ul> </li> <li>Region: us-east-1</li> <li>Access key: provided by manager</li> <li>Secret key: provided by manager</li> </ul> </li> <li> <p>Click connect.</p> </li> <li>Copy files across to this page and they will be safely stored.</li> </ol>"},{"location":"about/faq/#advanced-rclone","title":"Advanced: RClone","text":"<p>This is more stable and the preferred approach if you can do this.</p> <ul> <li> <p>Install RClone on your machine:</p> <pre><code>sudo -v ; curl https://rclone.org/install.sh | sudo bash\nmkdir -p ~/.config/rclone\n</code></pre> </li> </ul> <ul> <li> <p>Add the details provided by your manager, either via the rclone   config command, or using:</p> <pre><code>BUCKET_NAME=some-bucket-name\nACCESS_KEY=xxx\nSECRET_KEY=xxx\ncat &lt;&lt;EOF &gt; ~/.config/rclone/rclone.conf\n[s3-bucket]\ntype = s3\nprovider = AWS\naccess_key_id = ${ACCESS_KEY}\nsecret_access_key = ${SECRET_KEY}\nendpoint = https://${BUCKET_NAME}.s3.amazonaws.com\nregion = us-east-1\nacl = private\nEOF\n</code></pre> </li> </ul> <ul> <li> <p>Copy files from your system into the bucket:</p> <pre><code>rclone sync \\\n   /path/to/imagery_directory \\\n   s3-bucket:imagery_directory_plus_timestamp\n</code></pre> </li> </ul>"},{"location":"about/faq/#other-options","title":"Other Options","text":"<p>There are a few tools to mount an S3 bucket as a Windows drive:</p> <ul> <li>s3drive offers free personal usage.</li> <li>cloudmounter is paid software.</li> </ul> <p>There is also CyberDuck, a nice GUI tool also with a drag-and-drop interface for copying files to S3.</p>"},{"location":"about/faq/#final-steps","title":"Final Steps","text":"<ul> <li>Your manager, or contact at HOTOSM / NAXA will take it from here!</li> <li>Your imagery is safely backed up online, so can now be processed   and made available in DroneTM.</li> </ul>"},{"location":"about/team/","title":"The DroneTM Team","text":""},{"location":"decisions/","title":"Architectural Decisions","text":"<p>Markdown Architectural Decision Records documenting the technical decisions taken in this project.</p> <p>This process was started 31/07/2025, so does not necessarily capture all decisions from the projects inception.</p>"},{"location":"decisions/#decisions","title":"Decisions","text":"<ul> <li>0000 - HOTOSM Context and Alignment</li> <li>0001 - FastAPI for Backend API</li> <li>0002 - Flightplan Upload Options</li> </ul>"},{"location":"decisions/0000-hotosm/","title":"Higher Level HOTOSM Decisions","text":"<p>Many decisions have been made at an organizational level, affecting all tools that we develop.</p> <p>The decisions made in this project should not deviate much from the choices, starting here.</p>"},{"location":"decisions/0001-fastapi/","title":"Use FastAPI as Python web API framework","text":""},{"location":"decisions/0001-fastapi/#context-and-problem-statement","title":"Context and Problem Statement","text":"<p>We need to serve content from a backend linked to a database, to the frontend for display.</p> <p>Historically Django (DRF) and Flask were best. Since <code>asgi</code> had more adoption, async frameworks are key.</p> <p>FastAPI was the first to market to combine many powerful features:</p> <ul> <li>ASGI Starlette + Uvicorn server.</li> <li>Pydantic validation.</li> <li>OpenAPI spec parsing.</li> </ul> <p>Alternatives page in FastAPI docs.</p>"},{"location":"decisions/0001-fastapi/#considered-options","title":"Considered Options","text":"<ul> <li>Django Rest Framework</li> <li>Flask</li> <li>FastAPI</li> </ul>"},{"location":"decisions/0001-fastapi/#decision-outcome","title":"Decision Outcome","text":"<p>We chose FastAPI for Field-TM in 2022 is it was a well adopted, with a large community, and has great developer experience. It's also quite performant.</p> <p>This decision follows on from that, building on our previous experience for our need tool, Drone-TM.</p>"},{"location":"decisions/0001-fastapi/#consequences","title":"Consequences","text":"<ul> <li>Good, because code is much more concise and understandable.</li> <li>Good, because endpoints are auto-documented as OpenAPI.</li> <li>Bad, because as with any decision at this level, migration away becomes difficult   (would require a rewrite using another framework).</li> </ul>"},{"location":"decisions/0002-flightplan-upload/","title":"Reuse existing flightplan apps, by copying flightplan files to the correct directory","text":""},{"location":"decisions/0002-flightplan-upload/#context-and-problem-statement","title":"Context and Problem Statement","text":"<ul> <li>We have a good module for generating flightplans in a generic geojson format.</li> <li>Once we have a flightplan we need a way to send the flight instructions to drones.</li> <li>Manufacturers typically produce their own flying apps, such as DJI Fly, PotensicPro, etc.</li> <li>We have a tradeoff between the best user experience we can provide, with the maintainability   of the approach going forward, considering our limited capacity within the tech team.</li> <li>As of 2025, we have 3 major drone manufacturers:<ul> <li>DJI</li> <li>Parrot</li> <li>Autel</li> <li>Plus some smaller ones to consider, such as Potensic (cheap, good drones).</li> </ul> </li> </ul>"},{"location":"decisions/0002-flightplan-upload/#considered-options","title":"Considered Options","text":""},{"location":"decisions/0002-flightplan-upload/#1-developing-our-own-flight-app","title":"1. Developing Our Own Flight App","text":"<p>Approach: probably build our flightplan generation directly into the app, then click generate &amp; 'Go' to fly.</p> <p>Develop a mobile application that can bundle the manufacturers SDK to fly drones directly. Ideally we develop this cross-platform using Flutter, but it may complicate SDK usage.</p> <p>\ud83d\udc4d Pros</p> <ul> <li>Full control of user experience - very simple to use.</li> <li>Could implement full automation - click 'Go' and execute the flightplan without handholding.</li> </ul> <p>\ud83d\udc4e Cons</p> <ul> <li>High effort: SDK integration is non-trivial (especially DJI).</li> <li>Using Flutter (for both Android/iOS) may make SDK integration harder, needing   platform channels.</li> <li>The SDK releases for Android / iOS are inconsistent. For example DJI last updated its   iOS SDKs 3yrs ago!   The Android SDK is pretty up to date though.</li> <li>Maintenance cost is high (SDK updates, new device support, mobile developer).</li> <li>Risk of bricking or misflying drones: safety and liability considerations if we break them.</li> <li>SDK releases could be pulled at any point. DJI appear to be moving things to their cloud offering instead.</li> </ul> <p>Variants:</p> <ul> <li>Full DroneTM experience on mobile: swap the web-app for a full mobile experience.</li> <li>Hybrid (web-app + lightweight mobile app for flights), keeping the web-app for all drone-tm functionality,   while having a very small mobile app that is a thin SDK wrapper.<ul> <li>Simply embed the SDKs, then have a few buttons: 'Load Waypoints', 'Fly'.</li> <li>We would likely have these lightweight SDK wrappers developed as native apps, instead of Flutter, for easier SDK integration.</li> </ul> </li> </ul>"},{"location":"decisions/0002-flightplan-upload/#2-integrating-with-third-party-flight-apps","title":"2. Integrating With Third Party Flight Apps","text":"<p>Approach: export flightplans to file format required for Litchi or other apps (e.g., KML, CSV, JSON), then import from their apps.</p> <p>Note, the key thing here is that we use third-party apps, not the official apps.</p> <p>There are many options for third-party apps, with varying drone support.</p> <p>These options are free to generate flightplans, but cost for the processing (we will use ODM, so this doesn't matter):</p> <ul> <li>Pix4D Capture - supports most   DJI, Parrot, Autel drones + others.</li> <li>DroneDeploy Flight App - supports a   good range   of DJI drones mostly + others.</li> <li>MapPilotPro from Maps Made Easy - similar support   to DroneDeploy above.</li> </ul> <p>Litchi provides a good offering for a $25 lifetime license, DJI drones only.</p> <p>The nice thing about Litchi, is they are used pretty actively in the drone enthusiast community, and seem to be well liked / keep their pricing model flat.</p> <p>Two pipelines are available via QGIS plugins currently:</p> <ol> <li>https://github.com/JMG30/flight_planner</li> </ol> <ul> <li>https://github.com/pdfinn/flightplan2litchimission</li> </ul> <ol> <li>https://github.com/OpenGeoOne/qgis-drone-flight-planner</li> </ol> <p>Overall, it looks quite simple to dump a Litchi waypoint CSV (we could add this as an output option to drone-flightplan), to then import into the Litchi mobile app.</p> <p>\ud83d\udc4d Pros</p> <ul> <li>No SDK integration and maintenance - we outsource the hard part (also no mobile app development needed).</li> <li>Uses existing, well-liked apps in the community. Good UX and testing already.</li> <li>Easy transition for users that already know the apps.</li> <li>They generally have Android + iOS versions of the app, but with different drone support (depending on SDK availability).</li> </ul> <p>\ud83d\udc4e Cons</p> <ul> <li>Depend on the app manufacturer to implement the SDK support - generally quick, but can vary.</li> <li>May lose some of the mission configuration options, depending on what is supported in the app.</li> <li>They may change the file format or import method, breaking our integration.</li> <li>The format used for waypoint missions inside the apps could also change, e.g. Litchi CSV   format could change, breaking our integration temporarily.</li> </ul> <p>Variants:</p> <ul> <li>Try to do this without collaborating with the app developers. Simply download or purchase the app, then   integrate with it using their documentation.</li> <li>Alternatively, we could try to partner with for example Litchi, for better assurance of long term support   and collaboration (perhaps also reduced license fees for advocating their use / bulk buy?).</li> </ul>"},{"location":"decisions/0002-flightplan-upload/#3-using-official-flight-apps","title":"3. Using Official Flight Apps","text":"<p>Approach: use workarounds to import flightplans into official apps, while not officially supported. As of 2025-07-31, this is the primary mode available in DroneTM.</p> <p>Note, the key thing here is that we use official apps for manufacturers, which are generally more locked down.</p> <p>Generally these offerings are quite closed - offering no options for loading data via mobile 'intent' or direct file imports.</p> <p>Instead we need to create 'hack' workarounds:</p> <ul> <li>Generate our generic flightplan as geojson.</li> <li>Convert the flightplan to the specific format used by app, such as <code>.wmpl</code> KMZ file for DJI.</li> <li>Copy the file to the correct place on the filesystem, so it's picked up by the app.</li> <li>Open the app and run the flightplan.</li> </ul> <p>\ud83d\udc4d Pros</p> <ul> <li>Easy enough to extend to new drone brands, as long as we are able to reverse engineer their file format!</li> <li>No maintenance overhead integrating with SDKs, or mobile development required.</li> <li>Much easier to manage in a small team.</li> </ul> <p>\ud83d\udc4e Cons</p> <ul> <li>Slightly more 'fragile' over time:<ul> <li>Support for this could be blocked by manufacturers in various ways.</li> <li>People with different drone firmware or mobile app versions may get different behaviour.</li> <li>Would need to be tested frequently (could write a good suite of automated tests, to catch regressions early).</li> </ul> </li> <li>Reduces the list of drones we can possibly support.</li> <li>Relies on multiple flying applications:<ul> <li>Not as much of an issue for operators - they generally only have one drone and one app.</li> <li>But we need to document the approach to doing this for each manufacturer / app available.</li> </ul> </li> </ul> <p>This approach can be optimised further using WebADB/WebUSB pushing of the flightplans, reducing the need for users to mess with copying a file directly onto their device storage location.</p>"},{"location":"decisions/0002-flightplan-upload/#4-reverse-engineering-the-flight-protocols","title":"4. Reverse Engineering The Flight Protocols","text":"<ul> <li>This one is a bit of a long-shot, but we could 'in theory' intercept the signals sent to the drones and reverse engineer them.</li> <li>Once a flightplan is loaded and executed in the drones memory, the actual flight is autonomous.<ul> <li>Sure, it's risky to not have real time feedback on the drones status.</li> <li>We would basically have a set-and-forget approach, where we hope the flightplan succeeds and the drone returns!</li> </ul> </li> <li>Practically, we would have a small mobile app to send a flightplan and execute the autonomous flight directly.</li> <li>Legalities around this a murky.</li> </ul>"},{"location":"decisions/0002-flightplan-upload/#5-manufacturing-our-own-drone","title":"5. Manufacturing Our Own Drone","text":"<ul> <li>This has been investigated as a possible option &amp; may come to be in the future, as a longer term goal.</li> <li>Once we have a cheap drone specifically for community mapping applications, we could load   ArduPilot (open-source flight controller software).</li> <li>The drone would be stripped down to the essentials for orthophoto generation, reducing the overall   cost. It would ideally also have replaceable components, making it easy to repair anywhere in the world.</li> <li>This gives us ultimate flexibility and user experience refinement, at the cost of:<ul> <li>Reduced accessibility if we don't have enough drones, but other options are readily available.</li> <li>Can't use existing fleet of drones present in communities globally.</li> </ul> </li> </ul>"},{"location":"decisions/0002-flightplan-upload/#decision-outcome","title":"Decision Outcome","text":"<p>Short term: 3, using official flight apps:</p> <ul> <li>We originally implemented this in the first iteration of DroneTM, as a simple start point.</li> <li>The approach has since been refined in a   PR to add WebADB pushing of files,   to hopefully remove the manual process of file copying.</li> <li>Support for this will probably be maintained going forward, as it opens options   for typically unsupported drones, such as the Potensic Atom series (not supported   by third-party apps).</li> </ul> <p>Long term: 2, integrate with third-party apps:</p> <ul> <li>This opens up the options for easier additional drone support, making maintenance easier.</li> <li>We will be assessing this option into the future to see the viability.</li> <li>We won't include this in the 'Consequences' section below, as it's still in a   research phase.</li> </ul>"},{"location":"decisions/0002-flightplan-upload/#consequences","title":"Consequences","text":"<ul> <li>\u2705 suits our small team and development capacity.</li> <li>\u2705 integrates well with our existing web-app approach.</li> <li>\u274c user experience isn't as good as it could be.</li> <li>\u274c not quite as easy to add new drone support, as we need to do a lot of   trial-and-error for the file format / apps.</li> </ul> <p>We will revisit this strategy in future, and perhaps update in a new MADR document.</p>"},{"location":"dev/setup/","title":"Setting Up DroneTM For Development","text":""},{"location":"dev/setup/#prerequisites","title":"Prerequisites","text":"<p>Important</p> <p>You must have Docker and Docker Compose installed first:</p> <ul> <li>Docker install guide</li> <li>Docker Compose install guide</li> </ul> <p>Just is required too:</p> <ul> <li>Just</li> </ul>"},{"location":"dev/setup/#optional-configure-google-oauth","title":"(Optional) Configure Google OAuth","text":"<ul> <li>Create a new client ID and secret in your Google account for OAuth2.</li> <li>Set the redirect URL to your local frontend URL, e.g. <code>http://localhost:3040/auth</code>.</li> </ul> <p>Note</p> <p>This step is only required to use the frontend.</p>"},{"location":"dev/setup/#configure-your-dotenv","title":"Configure Your Dotenv","text":"<ul> <li>There is an example <code>.env.example</code> file that <code>.env</code> can be generated from using this command:   <code>just config generate-dotenv</code></li> <li>If you only plan on using the backend then everything should be   configured for you.</li> <li>Else, if you set up Google OAuth credentials, set the variables here:   <pre><code>GOOGLE_CLIENT_ID=\"YOUR_CLIENT_ID\"\nGOOGLE_CLIENT_SECRET=\"YOUR_CLIENT_SECRET\"\nGOOGLE_LOGIN_REDIRECT_URI=\"http://localhost:3040/auth\"\n</code></pre></li> </ul>"},{"location":"dev/setup/#monitoring","title":"Monitoring","text":"<ul> <li>At present, only Sentry is configured as the backend for logging with OpenTelemetry. By default   logging in non-production environments is disabled.</li> <li>To set it up and work with it, you will need these two ENV variables set correctly:   <pre><code>MONITORING=\"sentry\"\nSENTRY_DSN=\"&lt;sentry dsn url here&gt;\"\n</code></pre>   Then make sure to rebuild your backend Docker image: <code>docker compose build backend</code> so that Docker   now knows to install the extra set of dependencies.   You should see a success message if it worked correctly.</li> <li><code>LOG_LEVEL</code> is set to <code>info</code> by default. Setting it to <code>debug</code> makes the logs very verbose, so it   is recommended to leave the setting as is.</li> </ul>"},{"location":"dev/setup/#build-and-run-the-containers","title":"Build and Run The Containers","text":"<ul> <li>The <code>Justfile</code> in the project root contains all the logic needed to build and run the application.</li> <li><code>compose.sub.yaml</code> is used for production builds - <code>compose.yaml</code>, meanwhile, is used for development.</li> <li>To start the application, run:   <code>just start all</code></li> <li>This command will pull the required Docker images and start all services correctly.</li> </ul>"},{"location":"dev/setup/#access-the-services","title":"Access The Services","text":"<p>DroneTM Backend: http://localhost:8000</p> <p>DroneTM Frontend: http://localhost:3040</p> <p>Web ODM: http://localhost:9900</p> <ul> <li>Default user: <code>admin</code></li> <li>Default password: <code>password</code></li> </ul> <p>Note the ports may be different if you changed them in the dotenv file.</p>"},{"location":"manuals/dji/","title":"Using DJI Drones With DroneTM","text":""},{"location":"manuals/dji/#1-initialise-the-drone","title":"1. Initialise The Drone","text":"<ul> <li>As soon as you remove the drone from the packaging, mark the drone,   controller, and all batteries with a permanent marker to identify   them as a set.</li> <li>Ensure the foam insert it removed from behind the gimbal (camera),   so that it can move freely.</li> <li>Power on your drone, connect to Wifi, and log into your DJI account.   Without this step, the image timestamps will be incorrect and not   correctly synced with the current time and timezone.</li> <li>If you are using an RC2 or controller model with an in-built screen,   next insert your SD card into the controller, then go to   Profile --&gt; Settings --&gt; Storage. Click 'SD Card' to swap to using the   SD card to load waypoint missions from.</li> <li>Next, switch to image mode (instead of video mode), then go to the image   settings, and select 4:3 as the aspect ratio.   (we don't want 16:9 as it's cropped / mainly for video).</li> <li>To be able to load flightplans from DroneTM onto your controller / phone,   first you must fly at least one 'waypoint mission' via DJI Fly.</li> <li>Connect to your drone. While it's hovering, select 'Waypoint' mode.   Create a minimum of two waypoints by clicking the C1 button.</li> <li>Exit and land the drone - this part is done.</li> </ul>"},{"location":"manuals/dji/#2-waypoints-or-waylines","title":"2. Waypoints or Waylines?","text":"<ul> <li>There are two modes of creating flightplans in DroneTM.</li> <li>The primary method is 'waypoints', where each point to take a photo   is present, including the angle of the camera, altitude of the drone,   etc.</li> <li>However, for tasks covering a large area, we have a large number of   points generated. The RC2 controller (and low RC-N2 + low-spec devices)   struggle to load all of the points, and may lag or fail to run the   flightplan. This is mostly a problem when the number of waypoints   exceeds ~120.</li> <li>As a solution to this, we have 'waylines' mode, which essentially removes   all points between which the altitude does not vary significantly (&gt;5m).</li> <li>For the majority of flyable tasks, you should now have an acceptable   number of points to load in a single flight.</li> </ul>"},{"location":"manuals/dji/#3-loading-a-flightplan","title":"3. Loading A Flightplan","text":"<p>See tutorial videos on the DroneTM platform!</p> <p>Important</p> <p>Ensure the following for a successful flight:</p> <p>1. Before takeoff, the image settings are 4:3 and not 16:9.</p> <p>2. Also ensure you have set the max altitude the drone can fly in the      settings to the maximum. This is required for terrain following      to work, as it's the max altitude above sea level, not the      max altitude above ground (so the drone can fly high enough).</p> <p>3. Ensure the max altitude setting on the drone is all the way to      500m (the maximum) - they allows for terrain following to work      correctly.</p> <p>4. If using wayline mode, ensure you set the photo capture interval      on the drone to 2 seconds. Hold the icon above the photo capture      button, select the timer icon, scroll to 2 seconds, then click the      photo capture button to start. Ensure this is done as soon as the      drone reaches the 2nd waypoint on the mission (i.e. once it reaches      the start of the photo capture grid, after the initial takeoff      waypoint). Also ensure the photo capture is turned off when the final      waypoint is captured for the mission.</p> <p>5. Do not interfere with the device mid-flight. Wait for the mission      to finish before carrying out other operations on the controller.</p>"},{"location":"manuals/dji/#helpful-tips","title":"Helpful Tips","text":""},{"location":"manuals/dji/#q-my-drone-is-asking-me-to-log-in","title":"Q: My drone is asking me to log in","text":"<ul> <li>DJI is quite restrictive and requires all drones to be logged in to fly.</li> <li>Sometimes a firmware update may require you to login again.</li> <li>Ensure you are connected to Wifi: pull down the top bar on the screen   --&gt; toggle Wifi --&gt; connect to your network.</li> <li>Enter your DJI login credentials (created on the DJI website).</li> </ul>"},{"location":"manuals/dji/#q-i-cant-connect-the-mobile-app-on-my-phone-to-the-controller","title":"Q: I can't connect the mobile app on my phone to the controller","text":"<ul> <li>Make sure you enable 'Transfer mode' once the cables are plugged   in. By default it will often start in 'Charging mode', but you   need to pull down the notifications bar and click the popup there   to toggle connection mode.</li> <li>USB C cables can be difficult sometimes. Try swapping the direction   of the cable. Try another cable too. Ideally you should use the   USB C cable that was packaged with the drone.</li> <li>Try a different phone if possible too, to help confirm where the   issue may be.</li> </ul>"},{"location":"manuals/dji/#q-the-dates-on-my-final-imagery-files-are-wrong","title":"Q: The dates on my final imagery files are wrong","text":"<ul> <li>If the drone has not connected to Wifi for a while, the   clock inside the drone may be out of date. Connect to   Wifi to fix this problem.</li> </ul>"},{"location":"manuals/generate-flightplans/","title":"Generating Flightplans","text":""},{"location":"manuals/generate-flightplans/#manually-via-command-line","title":"Manually Via Command Line","text":"<ol> <li> <p>Calculate Flight Parameters:</p> <pre><code>python calculate_parameters.py \\\n    --drone_type DJI_MINI_4_PRO \\\n    --forward_overlap 75 \\\n    --side_overlap 75 \\\n    --altitude_above_ground_level 110 \\\n    --image_interval 2\n</code></pre> <p>This will output a JSON that can be used in step 5 below.</p> </li> <li> <p>Creating Waypoints:</p> <pre><code>python waypoints.py \\\n    --project_geojson_polygon aoi.geojson \\\n    --altitude_above_ground_level 110 \\\n    --forward_overlap 75 \\\n    --side_overlap 75 \\\n    --take_off_point LON,LAT \\\n    --output_file_path ./waypoints.geojson\n</code></pre> </li> <li> <p>Add Eleveation Data From A DEM File:</p> <pre><code>python add_elevation_from_dem.py dsm.tif waypoints.geojson waypoints_with_elevation.geojson\n</code></pre> <p>Here we need a DEM in .tiff format.</p> </li> <li> <p>Create Placemark File (For KMZ File):</p> <pre><code>python create_placemarks.py \\\n    --waypoints_geojson waypoints_with_elevation.geojson \\\n    --parameters '{\"forward_photo_height\": 84.0, \"side_photo_width\": 149.0, \"forward_spacing\": 20.95, \"side_spacing\": 44.6, \"ground_speed\": 10.47, \"altitude_above_ground_level\": 115}' \\\n    --outfile placemarks.geojson\n</code></pre> </li> <li> <p>Create WMPL Flightplan:</p> <pre><code>python output/dji.py \\\n    --placemark placemarks.geojson \\\n    --outfile flightplan.wpml\n</code></pre> </li> </ol>"},{"location":"manuals/ground-control-points/","title":"Ground Control Points","text":"<p>Ground Control Points are simply a way of mapping a known coordinate in the real world (ideally in very accurate coordinates such as ECEF), to a pixel on an image for georeferencing.</p> <p>When multiple GCPs are used together in the final stitching of drone flight imagery together, the final georeferencing should be very accurate.</p> <p>Further details can be found on the OpenDroneMap docs page about GCPs</p>"},{"location":"manuals/ground-control-points/#our-workflow","title":"Our Workflow","text":""},{"location":"manuals/operators/","title":"Drone Operator Manual","text":"<p>See drone specific advice under:</p> <ul> <li>DJI</li> <li>Potensic</li> </ul>"},{"location":"manuals/operators/#setup","title":"Setup","text":""},{"location":"manuals/operators/#a-drone-model","title":"a. Drone Model","text":"<p>See the table of supported drones.</p>"},{"location":"manuals/operators/#b-controller","title":"b. Controller","text":"Controller App file copy Web file copy Manual file copy RC-2* \u2705 \u274c \u2705 RC-N2 \u2705 \u2705 \u2705 RC-N3 \u2705 \u2705 \u2705 <p>If using a controller without an in-built screen, then your mobile device will be used as the screen / controller. For best user experience (web file copy), ensure your device has ADB enabled (search how to do this for your model).</p> <p>Note</p> <p>*recommended controllers</p> <p>Starred controllers have an integrated screen.   We recommend them because they are guaranteed to work with our   workflows.</p> <p>Other models that require you to use your own phone as a screen   will also work (e.g. RC-N2), but we have less control over the process   and cannot guarantee every phone will work well (high-spec devices   will perform better).</p>"},{"location":"manuals/operators/#c-sd-card","title":"c. SD Card","text":""},{"location":"manuals/operators/#selecting-a-card","title":"Selecting a card","text":"<ul> <li>We need a micro SD card to capture the imagery in the drone.</li> <li>You should look for models with a U3 rating or above, indicating   a sustained write speed of 30 MB/s.</li> <li>Models with less than this, e.g. a (10) rating meaning 10 MB/s,   will not be fast enough to write multiple images in a row.</li> </ul>"},{"location":"manuals/operators/#connecting-the-card","title":"Connecting the card","text":"<ul> <li>Be sure to plug into the drone and not the controller.</li> <li>When plugging in the SD Card, you may be prompted to format.   Accept this prompt.</li> <li>Otherwise, you must select and format the card via the controller   settings menu, under the 'Image' section.</li> <li>In the worst case scenario, when the SD Card is not recognized,   first put the card into a computed, format to exFAT, then place   back into the controller.</li> </ul>"},{"location":"manuals/operators/#flight-checklist","title":"Flight Checklist","text":""},{"location":"manuals/operators/#1-assessing-the-takeoff-point","title":"1. Assessing the takeoff point","text":"<ul> <li>Ensure you have assessed the surrounding before takeoff. Is there   anything overhead? Might the conditions here change over time   (e.g. a car might be present when the drone returns).</li> <li>Try to wear a high-visibility safety vest while flying.</li> <li>Check the ground on which you place the drone. Is it level?   Are there nearby obstacles it could collide with easily?   It's good to clear away debris and vegetation where possible.</li> </ul>"},{"location":"manuals/operators/#2-before-flying","title":"2. Before flying","text":"<ul> <li>Is the drone facing away from you before takeoff? The drone   should be in an orientation that is easily controllable,   should there be an issue during takeoff and manual control   is required.</li> <li>Have you practiced how to manually control the drone? This is   essential for if there are issues during the takeoff or landing   and manual takeover is required.</li> <li>Unfold the controller antenae and ensure they point at the drone   to maintain a good connection. If signal is lost, the drone may   return early.</li> </ul>"},{"location":"manuals/operators/#3-during-the-flight","title":"3. During the flight","text":"<ul> <li>Ensure you keep line-of-sight of the drone at all times.   Sometimes various issues can occur mid-flight, such as 'fly-away'   for misconfigured drones that you may have to catch before they   get too far, or uncontrollable issues such as being attacked by   birds.</li> <li>Regularly check the flight on the controller and ensure the mission   does not return early due to an issue.</li> <li>Try to keep the controller in the shade as much as possible   during high temperatures, to avoid overheating. If possible,   wear a big hat and face away from the sun. Or fly from a shaded   area, but ensuring you can still see the drone.</li> </ul>"},{"location":"manuals/operators/#field-workarounds","title":"Field Workarounds","text":"<p>This section covers some workarounds discovered by drone operators, to get around the limitations of the platform (until it's improved).</p>"},{"location":"manuals/operators/#the-drone-returned-while-the-flight-was-part-way-through","title":"The drone returned while the flight was part way through","text":"<ul> <li>Ideally the task areas should be optimised to fly for ~70%   of the battery capacity, but sometimes this doesn't happen.</li> <li>There is a 'field hack' workaround for now to continue from   where the flightplan cut out part way.</li> <li>In the DJI controller, go to waypoint mode and delete waypoints   (manually scroll to the beginning, delete one, scroll again to   beginning, delete again, etc).</li> <li>Save the waypoint flight and fly it again with only the required   points.</li> </ul>"},{"location":"manuals/potensic/","title":"Using DJI Drones With DroneTM","text":"<ul> <li>Download a modified <code>debuggable</code> version of PotensicPro.</li> <li>Connect your phone to the device running DroneTM via cable.</li> <li>Create a flightplan and 'Copy directly to the drone'   from the task page.</li> <li>This will prompt you to connect allow access to your   phone from the DroneTM website.</li> <li>The flightplan will be copied in the correct place.</li> <li>Open the PotensicPro app, take off, then load the   'waypoints' menu. Your flight will be selectable   in the menu.</li> </ul>"}]}